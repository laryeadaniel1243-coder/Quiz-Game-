import { getDatabase, ref, get, update } 
from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

// JOIN ROOM FUNCTION
window.joinRoom = async function(){
    const roomId = document.getElementById("roomInput").value.trim().toUpperCase();
    if(roomId === ""){
        alert("Please enter a Room ID!");
        return;
    }

    const db = getDatabase();

    // Check if room exists
    const roomRef = ref(db, "rooms/" + roomId);
    const snapshot = await get(roomRef);

    if(!snapshot.exists()){
        alert("Room does not exist! Create a new room or check the ID.");
        return;
    }

    // Add current player to room
    const username = prompt("Enter your name:") || "Player";
    const playersRef = ref(db, "rooms/" + roomId + "/players");

    // Push player to Firebase
    const updates = {};
    updates[username] = { joinedAt: Date.now(), score: 0 };
    await update(playersRef, updates);

    // Redirect to actual game page
    window.location.href = `room.html?room=${roomId}&player=${username}`;
}
room=ABX92K
player=John
const urlParams = new URLSearchParams(window.location.search);
const roomId = urlParams.get("room");
const playerName = urlParams.get("player");

console.log("Room:", roomId, "Player:", playerName); 